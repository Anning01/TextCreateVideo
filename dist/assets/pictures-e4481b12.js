import{l as c,a as o}from"./url-2799ff3c.js";/* empty css                   *//* empty css                        *//* empty css                  *//* empty css                  *//* empty css                  */import"./el-tooltip-4ed993c7.js";import{d as D,C as n,D as L,o as g,b as C,f as l,w as i,F as M,i as j,e as h,a as k,g as V,G as A,V as G,K,I as O,L as X,N as Z,M as q,c as H,p as J,k as Q,X as R,_ as W}from"./index-d300417d.js";const Y=s=>(J("data-v-fd2a08f7"),s=s(),Q(),s),ee=["src","onClick"],te=Y(()=>h("br",null,null,-1)),ae=["src"],le=D({__name:"pictures",setup(s){const v=n(),p=n(1),d=n(10),u=n([]),_=n([]),b=n(),m=n(),f=n(),x=e=>{f.value=e,m.value=!0},y=()=>{console.log(_.value),_.value.length>0?c(o.book_pictures_download,"post",{id_list:_.value}).then(e=>{window.open(o.base+e.data.url)}):A({title:"下载失败",message:"未选中任何数据",type:"error"})},S=e=>{d.value=e},E=e=>{p.value=e},z=e=>{window.open(o.base+e.path)},B=e=>{c(o.book_pictures,"get",{},{book_id:e}).then(a=>{u.value=a==null?void 0:a.data})},I=e=>{_.value=e.map(a=>a.id)};return L(()=>{c(o.book_pictures,"get").then(e=>{u.value=e==null?void 0:e.data}),c(o.book_class,"get").then(e=>{b.value=e==null?void 0:e.data})}),(e,a)=>{const N=R,F=G,r=K,w=O,P=X,T=Z,U=q;return g(),C("div",null,[l(F,{modelValue:v.value,"onUpdate:modelValue":a[0]||(a[0]=t=>v.value=t),class:"m-2",placeholder:"Select",size:"large",onChange:a[1]||(a[1]=t=>B(v.value))},{default:i(()=>[(g(!0),C(M,null,j(b.value,t=>(g(),H(N,{key:t.id,label:t.name,value:t.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),l(P,{onSelectionChange:I,data:u.value.slice((p.value-1)*d.value,p.value*d.value),border:"",style:{width:"100%"}},{default:i(()=>[l(r,{type:"selection",width:"55"}),l(r,{prop:"id",label:"编号",width:"55"}),l(r,{prop:"name","show-overflow-tooltip":"true",effect:"light",label:"书名"}),l(r,{prop:"index",label:"图片顺序"}),l(r,{label:"图片"},{default:i(t=>[h("img",{style:{"max-width":"80px","max-height":"80px"},class:"table-thumb",src:k(o).base+t.row.path,onClick:$=>x(k(o).base+t.row.path)},null,8,ee)]),_:1}),l(r,{label:"操作",width:"100"},{default:i(t=>[l(w,{size:"small",onClick:$=>z(t.row)},{default:i(()=>[V("下载")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),l(w,{type:"primary",onClick:y},{default:i(()=>[V("下载")]),_:1}),te,l(T,{"current-page":p.value,"page-size":d.value,layout:"total, sizes, prev, pager, next, jumper",total:u.value.length,onSizeChange:S,onCurrentChange:E},null,8,["current-page","page-size","total"]),l(U,{modelValue:m.value,"onUpdate:modelValue":a[2]||(a[2]=t=>m.value=t)},{default:i(()=>[h("img",{src:f.value,style:{width:"100%"}},null,8,ae)]),_:1},8,["modelValue"])])}}});const _e=W(le,[["__scopeId","data-v-fd2a08f7"]]);export{_e as default};
