import"./axios-6304c0c0.js";/* empty css                        *//* empty css                  *//* empty css                  *//* empty css                  *//* empty css                    */import"./el-tooltip-4ed993c7.js";import{l as g,a as f}from"./url-6b9f5c33.js";/* empty css                   *//* empty css                */import"./el-form-item-4ed993c7.js";import{u as y}from"./index-d53540ad.js";import{d as S,o as h,c as z,w as a,e as x,f as e,g as C,a as r,O as T,P as M,Q as O,I as U,M as A,C as b,D as G,b as F,F as K,i as Q,G as j,R,K as W,L as q,N as H,S as J}from"./index-85b17170.js";const X={class:"dialog-footer"},V="140px",Y=S({__name:"sectionUpdate",setup($){const{section:o}=y(),_=()=>{o.dialogFormVisible=!o.dialogFormVisible,window.location.reload()},c=s=>{console.log(s),g(f.book_section+`/${s.id}`,"put",s).then(l=>{o.dialogFormVisible=!o.dialogFormVisible})};return(s,l)=>{const d=T,u=M,w=O,v=U,k=A;return h(),z(k,{modelValue:r(o).dialogFormVisible,"onUpdate:modelValue":l[5]||(l[5]=n=>r(o).dialogFormVisible=n),title:"文本信息"},{footer:a(()=>[x("span",X,[e(v,{onClick:_},{default:a(()=>[C("取消")]),_:1}),e(v,{type:"primary",onClick:l[4]||(l[4]=n=>c(r(o).scetion_obj))},{default:a(()=>[C(" 修改 ")]),_:1})])]),default:a(()=>[e(w,{model:r(o).scetion_obj},{default:a(()=>[e(u,{label:"书名","label-width":V},{default:a(()=>[e(d,{modelValue:r(o).scetion_obj.name,"onUpdate:modelValue":l[0]||(l[0]=n=>r(o).scetion_obj.name=n),autocomplete:"off",disabled:"true"},null,8,["modelValue"])]),_:1}),e(u,{label:"文本片段","label-width":V},{default:a(()=>[e(d,{modelValue:r(o).scetion_obj.paragraph,"onUpdate:modelValue":l[1]||(l[1]=n=>r(o).scetion_obj.paragraph=n),autocomplete:"off",disabled:"true"},null,8,["modelValue"])]),_:1}),e(u,{label:"正向提示词","label-width":V},{default:a(()=>[e(d,{modelValue:r(o).scetion_obj.prompt,"onUpdate:modelValue":l[2]||(l[2]=n=>r(o).scetion_obj.prompt=n),autocomplete:"off"},null,8,["modelValue"])]),_:1}),e(u,{label:"反向提示词","label-width":V},{default:a(()=>[e(d,{modelValue:r(o).scetion_obj.negative,"onUpdate:modelValue":l[3]||(l[3]=n=>r(o).scetion_obj.negative=n),autocomplete:"off"},null,8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue"])}}}),Z=x("br",null,null,-1),ce=S({__name:"section",setup($){const{section:o}=y(),_=b(1),c=b(10),s=b([]),l=b([]),d=b(),u=b(),w=t=>{l.value=t.map(i=>i.id)},v=t=>{c.value=t},k=t=>{_.value=t},n=t=>{o.dialogFormVisible=!o.dialogFormVisible,o.scetion_obj=t};G(()=>{g(f.book_section,"get").then(t=>{s.value=t==null?void 0:t.data}),g(f.book_class,"get").then(t=>{u.value=t==null?void 0:t.data})});const B=()=>{if(l.value.length>0){const t=l.value.length;g(f.book_section,"delete",{id_list:l.value}).then(i=>{j({title:i.data.message,message:`成功删除了${t}条数据`,type:"success"}),window.location.reload()})}else j({title:"删除失败",message:"未选中任何数据",type:"error"})},N=t=>{g(f.book_section,"get",{},{book_id:t}).then(i=>{s.value=i==null?void 0:i.data})};return(t,i)=>{const D=J,I=R,m=W,E=U,L=q,P=H;return h(),F("div",null,[e(I,{modelValue:d.value,"onUpdate:modelValue":i[0]||(i[0]=p=>d.value=p),class:"m-2",placeholder:"Select",size:"large",onChange:i[1]||(i[1]=p=>N(d.value))},{default:a(()=>[(h(!0),F(K,null,Q(u.value,p=>(h(),z(D,{key:p.id,label:p.name,value:p.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),e(L,{onSelectionChange:w,data:s.value.slice((_.value-1)*c.value,_.value*c.value),border:"",style:{width:"100%"}},{default:a(()=>[e(m,{type:"selection",width:"55"}),e(m,{prop:"id",label:"编号",width:"55"}),e(m,{prop:"name",label:"书名"}),e(m,{prop:"paragraph","show-overflow-tooltip":"true",effect:"light",label:"片段"}),e(m,{prop:"prompt","show-overflow-tooltip":"true",label:"正向提示词"}),e(m,{prop:"negative","show-overflow-tooltip":"true",label:"反向提示词"}),e(m,{label:"操作",width:"100"},{default:a(p=>[e(E,{size:"small",onClick:ee=>n(p.row)},{default:a(()=>[C("修改")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),e(E,{type:"primary",onClick:B},{default:a(()=>[C("删除")]),_:1}),Z,e(P,{"current-page":_.value,"page-size":c.value,layout:"total, sizes, prev, pager, next, jumper",total:s.value.length,onSizeChange:v,onCurrentChange:k},null,8,["current-page","page-size","total"]),e(Y)])}}});export{ce as default};
