import"./axios-6304c0c0.js";/* empty css                        *//* empty css                  *//* empty css                  *//* empty css                  *//* empty css                    */import"./el-tooltip-4ed993c7.js";import{l as s,a as l}from"./url-6b9f5c33.js";import{d as B,C as n,D as N,o as m,b as h,f as o,w as r,F,i as T,g as b,e as L,G as P,R as $,K as j,I as A,L as D,N as G,c as I,S as K}from"./index-85b17170.js";const M=L("br",null,null,-1),ee=B({__name:"voice",setup(O){const _=n(),p=n(1),d=n(10),u=n([]),c=n([]),v=n(),f=()=>{c.value.length>0?s(l.book_voice_download,"post",{id_list:c.value}).then(e=>{window.open(l.base+e.data.url)}):P({title:"下载失败",message:"未选中任何数据",type:"error"})},w=e=>{d.value=e},C=e=>{p.value=e},k=e=>{window.open(l.base+e.path)},z=e=>{s(l.book_voice,"get",{},{book_id:e}).then(t=>{u.value=t==null?void 0:t.data})},E=e=>{c.value=e.map(t=>t.id)};return N(()=>{s(l.book_voice,"get").then(e=>{u.value=e==null?void 0:e.data}),s(l.book_class,"get").then(e=>{v.value=e==null?void 0:e.data})}),(e,t)=>{const S=K,V=$,i=j,g=A,y=D,x=G;return m(),h("div",null,[o(V,{modelValue:_.value,"onUpdate:modelValue":t[0]||(t[0]=a=>_.value=a),class:"m-2",placeholder:"Select",size:"large",onChange:t[1]||(t[1]=a=>z(_.value))},{default:r(()=>[(m(!0),h(F,null,T(v.value,a=>(m(),I(S,{key:a.id,label:a.name,value:a.id},null,8,["label","value"]))),128))]),_:1},8,["modelValue"]),o(y,{onSelectionChange:E,data:u.value.slice((p.value-1)*d.value,p.value*d.value),border:"",style:{width:"100%"}},{default:r(()=>[o(i,{type:"selection",width:"55"}),o(i,{prop:"id",label:"编号",width:"55"}),o(i,{prop:"name","show-overflow-tooltip":"true",effect:"light",label:"书名"}),o(i,{prop:"index",label:"音频顺序"}),o(i,{label:"操作",width:"100"},{default:r(a=>[o(g,{size:"small",onClick:R=>k(a.row)},{default:r(()=>[b("下载")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"]),o(g,{type:"primary",onClick:f},{default:r(()=>[b("下载")]),_:1}),M,o(x,{"current-page":p.value,"page-size":d.value,layout:"total, sizes, prev, pager, next, jumper",total:u.value.length,onSizeChange:w,onCurrentChange:C},null,8,["current-page","page-size","total"])])}}});export{ee as default};
